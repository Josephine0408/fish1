<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ÈÉ®‰ª∂Â≠∏Áøí</title>
  <style>
    @font-face {
      font-family: 'BpmfIansui-Regular';
      src: url('BpmfIansui-Regular.ttf') format('truetype');
    }

    body {
      font-family: 'BpmfIansui-Regular', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 50px;
      position: relative;
    }

    .main-character {
      font-size: 200px;
      color: #3e64ff;
      margin-bottom: 20px;
    }

    .options-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin-bottom: 30px;
    }

    .option-box {
      border: 2px solid #ccc;
      padding: 10px 20px;
      text-align: center;
      font-size: 60px;
      background-color: #f0f8ff;
      border-radius: 12px;
      cursor: pointer;
    }

    .word-text {
      font-size: 24px;
      display: block;
      margin-top: 5px;
    }

    .step-container {
      display: none;
      gap: 20px;
      margin-bottom: 30px;
      flex-direction: column;
      align-items: center;
    }

    .step-box {
      display: none;
      flex-direction: column;
      align-items: center;
      border: 2px dashed #aaa;
      padding: 20px;
      border-radius: 12px;
    }

    .step-box.active {
      display: flex;
      animation: fadeIn 0.5s;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .step-character {
      font-size: 150px;
      margin-bottom: 10px;
    }

    .step-word {
      font-size: 32px;
      margin-bottom: 10px;
    }

    .input-box {
      font-family: 'BpmfIansui-Regular', sans-serif;
      font-size: 28px;
      height: 50px;
      width: 300px;
      padding: 10px;
      border: 2px solid #ccc;
      border-radius: 8px;
      text-align: center;
      margin-bottom: 10px;
    }

    .display-area {
      margin-bottom: 10px;
      font-size: 20px;
      color: #555;
    }

    button {
      padding: 10px 20px;
      font-size: 18px;
      background-color: #90caf9;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    .home-button {
      position: absolute;
      top: 20px;
      right: 20px;
      display: none;
      background-color: #ffcc80;
    }

    .timer {
      position: absolute;
      top: 20px;
      right: 120px;
      font-size: 20px;
      color: #333;
      background-color: #e0f7fa;
      padding: 8px 16px;
      border-radius: 10px;
    }

    .success-feedback {
      font-size: 24px;
      color: green;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="timer" id="timer">ÊôÇÈñìÔºö0 Áßí</div>
  <button class="home-button" onclick="goHome()">Next</button>

  <div class="main-character" id="mainChar">Èùí</div>
  <div class="options-container" id="optionsContainer"></div>
  <div class="step-container" id="stepContainer"></div>

  <script>
    let currentStep = 0;
    let groupIndex = 0;
    let timer = 0;
    let timerInterval;
    let hasStarted = false;

    const wordGroups = [
      {
        main: 'Èùí',
        options: [
          { char: 'Ê∏Ö', word: 'Ê∏ÖÊ•ö' },
          { char: 'Ë´ã', word: 'Ë´ãÂïè' },
          { char: 'Á≤æ', word: 'Á≤æÁ•û' },
          { char: 'Áùõ', word: 'ÁúºÁùõ' },
        ],
      },
      {
        main: 'Ë•Ñ',
        options: [
          { char: 'ËÆì', word: 'ËÆì‰Ωç' },
          { char: 'Èë≤', word: 'Èë≤Âµå' },
          { char: 'Â£§', word: 'ÂúüÂ£§' },
          { char: 'Ë•Ñ', word: 'Ë•ÑÂä©' },
        ],
      },
      {
        main: 'Êú®',
        options: [
          { char: 'Êûó', word: 'Ê£ÆÊûó' },
          { char: 'Ê®£', word: 'Ê®£Â≠ê' },
          { char: 'Ê®ô', word: 'Â∫ßÊ®ô' },
          { char: 'Êùë', word: 'ÊùëÈáå' },
        ],
      },
      {
        main: 'Ê∞¥',
        options: [
          { char: 'Ê≤≥', word: 'Ê≤≥ÊµÅ' },
          { char: 'Ê¥ó', word: 'Ê¥óË°£' },
          { char: 'Ê∑ö', word: 'ÁúºÊ∑ö' },
          { char: 'Êµ∑', word: 'Êµ∑Ê¥ã' },
          { char: 'Êπñ', word: 'ÊπñÊ≥ä' },
        ],
      },
      {
        main: 'ÂøÉ',
        options: [
          { char: 'ÊÉÖ', word: 'ÂøÉÊÉÖ' },
          { char: 'ÊÄï', word: 'ÂÆ≥ÊÄï' },
          { char: 'ÊÄí', word: 'ÊÜ§ÊÄí' },
          { char: 'Âøò', word: 'ÂøòË®ò' },
          { char: 'ÊÑü', word: 'ÊÑüË¨ù' },
        ],
      },
      {
        main: 'Ëçâ',
        options: [
          { char: 'Ëçâ', word: 'Ëä±Ëçâ' },
          { char: 'Ëå∂', word: 'Á∂†Ëå∂' },
          { char: 'Ëãó', word: 'Ê®πËãó' },
          { char: 'Ëéì', word: 'ËçâËéì' },
          { char: 'Ëèú', word: 'È´òÈ∫óËèú' },
        ],
      },
      {
        main: 'Ë®Ä',
        options: [
          { char: 'Ë©±', word: 'Ë´áË©±' },
          { char: 'Ë®ò', word: 'Ë®ò‰Ωè' },
          { char: 'Ë™û', word: 'Ë™ûË®Ä' },
          { char: 'Ë™†', word: 'Ë™†ÂØ¶' },
          { char: 'Ë¨ù', word: 'Ë¨ùË¨ù' },
        ],
      },
      {
        main: 'ÁÅ´',
        options: [
          { char: 'ÁÖÆ', word: 'ÁÖÆÈ£Ø' },
          { char: 'Ááí', word: 'ÁáíÁÑ¶' },
          { char: 'ÁÖô', word: 'ÂÜíÁÖô' },
          { char: 'ÁàÜ', word: 'ÁàÜÁÇ∏' },
          { char: 'ÁÇÆ', word: 'ÁÅ´ÁÇÆ' },
        ],
      },
      {
        main: 'È¢®',
        options: [
          { char: 'È¢®', word: 'È¢®Ëªä' },
          { char: 'È¢±', word: 'È¢±È¢®' },
          { char: 'È£Ü', word: 'È£ÜËªä' },
          { char: 'Ê•ì', word: 'Ê•ìËëâ' },
          { char: 'Áòã', word: 'ÁôºÁòã' },
        ],
      },
    ];

    function speakText(text) {
      window.speechSynthesis.cancel(); // ÂèñÊ∂àÂâç‰∏ÄÊÆµË™ûÈü≥
      const msg = new SpeechSynthesisUtterance(text);
      msg.lang = 'zh-TW';
      window.speechSynthesis.speak(msg);
    }

    function startSteps() {
      if (hasStarted) return;
      hasStarted = true;
      document.getElementById('stepContainer').style.display = 'flex';
      const firstStep = document.querySelector('.step-box');
      if (firstStep) {
        firstStep.classList.add('active');
        const char = firstStep.querySelector('.step-character').innerText;
        const word = firstStep.querySelector('.step-word').innerText;
        speakText(char);
        speakText(word);
        speakText('Ë´ãËº∏ÂÖ•Ë©ûË™û');
      }
    }

    function nextStep(step) {
      const current = document.getElementById(`step${step}`);
      const input = current.querySelector('.input-box');
      const correct = current.querySelector('.step-word').innerText;

      if (input.value.trim() !== correct) {
        alert('Ëº∏ÂÖ•ÈåØË™§ÔºåË´ãÂÜçË©¶‰∏ÄÊ¨°ÔºÅ');
        speakText('Ë´ãÂÜçË©¶‰∏ÄÊ¨°');
        return;
      }

      const next = document.getElementById(`step${step + 1}`);
      current.classList.remove('active');
      if (next) {
        next.classList.add('active');
        const char = next.querySelector('.step-character').innerText;
        const word = next.querySelector('.step-word').innerText;
        speakText(char);
        speakText(word);
        speakText('Ë´ãËº∏ÂÖ•Ë©ûË™û');
      }
    }

    function finishSteps() {
      const current = document.querySelector('.step-box.active');
      const input = current.querySelector('.input-box');
      const correct = current.querySelector('.step-word').innerText;
      if (input.value.trim() !== correct) {
        alert('Ëº∏ÂÖ•ÈåØË™§ÔºåË´ãÂÜçË©¶‰∏ÄÊ¨°ÔºÅ');
        speakText('Ë´ãÂÜçË©¶‰∏ÄÊ¨°');
        return;
      }
      speakText('ÊÅ≠ÂñúÂÆåÊàêÔºÅ');
      const feedback = document.createElement('div');
      feedback.className = 'success-feedback';
      feedback.innerText = 'üéâ ÊÅ≠Âñú‰Ω†ÂÆåÊàêÊú¨È°åÔºÅ';
      document.body.appendChild(feedback);
      document.querySelector('.home-button').style.display = 'block';
    }

    function goHome() {
      hasStarted = false;
      const oldFeedback = document.querySelector('.success-feedback');
      if (oldFeedback) oldFeedback.remove();
      replaceWords();
      resetSteps();
    }

    function replaceWords() {
      const group = wordGroups[groupIndex];
      document.getElementById('mainChar').innerText = group.main;

      const optionsContainer = document.getElementById('optionsContainer');
      const stepContainer = document.getElementById('stepContainer');
      optionsContainer.innerHTML = '';
      stepContainer.innerHTML = '';

      group.options.forEach((opt, i) => {
        const option = document.createElement('div');
        option.className = 'option-box';
        option.setAttribute('tabindex', '0');
        option.setAttribute('role', 'button');
        option.innerHTML = `<span>${opt.char}</span><span class="word-text">${opt.word}</span>`;
        option.onclick = startSteps;
        optionsContainer.appendChild(option);

        const stepBox = document.createElement('div');
        stepBox.className = 'step-box';
        stepBox.id = `step${i + 1}`;
        stepBox.innerHTML = `
          <div class="step-character">${opt.char}</div>
          <div class="step-word">${opt.word}</div>
          <input class="input-box" aria-label="Ë©ûË™ûËº∏ÂÖ•" type="text" placeholder="Ë´ãËº∏ÂÖ•Ë©ûË™û" oninput="updateDisplay(this, 'display${i + 1}')" />
          <div id="display${i + 1}" class="display-area"></div>
          <button onclick="${i + 1 === group.options.length ? 'finishSteps()' : `nextStep(${i + 1})`}">${i + 1 === group.options.length ? 'ÂÆåÊàê' : '‰∏ã‰∏ÄÊ≠•'}</button>
        `;
        stepContainer.appendChild(stepBox);
      });

      groupIndex = (groupIndex + 1) % wordGroups.length;
    }

    function resetSteps() {
      currentStep = 0;
      document.querySelector('.home-button').style.display = 'none';

      const steps = document.querySelectorAll('.step-box');
      steps.forEach(stepBox => {
        stepBox.classList.remove('active');
        const display = stepBox.querySelector('.display-area');
        if (display) display.innerText = '';
        const input = stepBox.querySelector('.input-box');
        if (input) input.value = '';
      });

      const firstStep = document.querySelector('.step-box');
      if (firstStep) {
        firstStep.classList.add('active');
        const char = firstStep.querySelector('.step-character').innerText;
        const word = firstStep.querySelector('.step-word').innerText;
        speakText(char);
        speakText(word);
        speakText('Ë´ãËº∏ÂÖ•Ë©ûË™û');
      }

      document.getElementById('stepContainer').style.display = 'flex';
    }

    function updateDisplay(input, displayId) {
      document.getElementById(displayId).innerText = input.value;
    }

    function startTimer() {
      timerInterval = setInterval(() => {
        timer++;
        document.getElementById('timer').innerText = `ÊôÇÈñìÔºö${timer} Áßí`;
      }, 1000);
    }

    replaceWords();
    startTimer();
  </script>
</body>
</html>













